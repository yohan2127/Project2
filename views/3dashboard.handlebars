<!--Top Row for columns-->
<div class="container-fluid d-flex flex-wrap-reverse">

  <!--favicon-->
  <div class="col-sm-12 col-md-12 col-lg-8 d-flex" id="navigation-box">
    <i class="fa fa-hacker-news fa-4x" aria-hidden="true" id="favicon"></i>

    <!--collapsible navigation-->
    <div class="topnav" id="myTopnav">
      <a class="active">Dashboard</a>
      <a href="/mycellar">My Cellar</a>
      <a href="/contacts">Contacts</a>
      <a href="/orders">Orders</a>
      <a href="/csv">Import wine </a>
      <a href="javascript:void(0);" class="icon" onclick="collapsClick()">
        <i class="fa fa-bars"></i>
      </a>
    </div>
    <br>
  </div>

  <!--header column 2-->
  <div class="col-sm-12 col-md-12 col-lg-4 d-flex flex-row-reverse">

    <!--profile and logout dropdown-->
    <div class="admin-login">
      <div class="dropdown">
        <button onclick="myFunction()" class="dropbtn">Username</button>
        <div id="myDropdown" class="dropdown-content">
          <button type="button" class="btn btn-light w-100" data-toggle="modal"
            data-target="#profileUpdateModal">Profile</button>
          <a class="btn btn-light w-100" href="/admin">News Feed</a>
          <a class="btn btn-light w-100" href="/logout">Log Out</a>
        </div>
      </div>
      <!--User logo......Favicon-->
      <div class="userLogo"><i class="fa fa-user-circle fa-4x" aria-hidden="true" id="favicon"></i></div>
    </div>
  </div>
</div>



<!--background and body container dashboard contents-->
<div class="container-fluid" id="data-page">
    <div class="row d-flex flex-wrap">
      <div class="col-lg-1 hidden-md hidden-sm hidden-xs"></div>
        <div class="col-lg-4 col-md-12 col-sm-12 col-xs-12" id="scrollable">


<div class="col-md-12 mt-3" id="news-feed-container">
  <label id="post"><h2>Maybe Make A Post</h2><input type="text" placeholder="Post">
      <button class="btn btn-success btn-sm" id="post-submit">submit!</button>
    </label>
    
<!--Scrollable box for news feed-->
<div class="news-card-box d-flex flex-column justify-content-center" id="scrollable-news">

<!--Scrollable content for news feed-->
<div class="card">
  <img class="card-img-top" src="https://placehold.it/280x210" alt="Card image cap">
    <div class="card-body">
      <h4 class="title-card">author</h4>
          <p class="card-text">title</p>
         </div>
      </div>

<div class="card">
  <img class="card-img-top" src="https://placehold.it/280x210" alt="Card image cap">
    <div class="card-body">
      <h4 class="title-card">author</h4>
        <p class="card-text">title</p>
      </div>
    </div>

    <div class="card">
  <img class="card-img-top" src="https://placehold.it/280x210" alt="Card image cap">
    <div class="card-body">
      <h4 class="title-card">author</h4>
          <p class="card-text">title</p>
         </div>
      </div>
      
<div class="card">
  <img class="card-img-top" src="https://placehold.it/280x210" alt="Card image cap">
    <div class="card-body">
      <h4 class="title-card">author</h4>
        <p class="card-text">title</p>
      </div>
    </div>
        </div>
      </div>
    </div>




    <!--right column/ messaging/orders/cellar-->
    <div class="col-lg-7 col-md-12 col-sm-12 col-xs-12" style=" height:800px; padding-top:30px;"
      id="scrollable">
      <!--Dashboard contacts chart-->
      <div class="row" style=" height:380px;">
        <div class="col-md-12" style="padding-top:28px;">
          <div class="card border-secondary "
            style="max-width: 40rem; border:solid 1px; height:330px;">
            <div class="card-header" style="height: 45px;">
              <h3>ChatterBox</h3>
            </div>
            <div class="card-body text-secondary d-inline-flex p-2"
              style="padding:5px 2px 8px 2px!important; height:100%;">

              <!--Little Div for message box// notice the red borders for easier navigation-->

              <div class="p-2 col-lg-7 col-md-6 col-sm-6 col-xs-6">
                <label style="margin-left:5px;">Messages:</label>
                <div class="message-box" style="height:150px; overflow-y: scroll; border: solid 1px grey; background-color:rgb(199, 199, 199);border-radius:3px;">
                  <ul class="messages">
                    <li class="nav-item"><a class="nav-link" href="#">Link</a></li></br>
                    <li class="nav-item"><a class="nav-link" href="#">Link</a></li></br>
                    <li class="nav-item"><a class="nav-link" href="#">Link</a></li></br>
                    <li class="nav-item"><a class="nav-link" href="#">Link</a></li></br>
                    <li class="nav-item"><a class="nav-link" href="#">Link</a></li></br>
                    <li class="nav-item"><a class="nav-link" href="#">Link</a></li></br>
                    <li class="nav-item"><a class="nav-link" href="#">Link</a></li></br>
                    <li class="nav-item"><a class="nav-link" href="#">Link</a></li></br>
                    <li class="nav-item"><a class="nav-link" href="#">Link</a></li></br>
                    <li class="nav-item"><a class="nav-link" href="#">Link</a></li></br>
                    <li class="nav-item"><a class="nav-link" href="#">Link</a></li></br>
                    <li class="nav-item"><a class="nav-link" href="#">Link</a></li></br>
                    <li class="nav-item"><a class="nav-link" href="#">Link</a></li></br>
                    <li class="nav-item"><a class="nav-link" href="#">Link</a></li></br>
                    <li class="nav-item"><a class="nav-link" href="#">Link</a></li></br>
                    <li class="nav-item"><a class="nav-link" href="#">Link</a></li></br>
                    <li class="nav-item"><a class="nav-link" href="#">Link</a></li></br>
                    <li class="nav-item"><a class="nav-link" href="#">Link</a></li></br>
                    <li class="nav-item"><a class="nav-link" href="#">Link</a></li></br>
                    <li class="nav-item"><a class="nav-link" href="#">Link</a></li></br>
                    <li class="nav-item"><a class="nav-link" href="#">Link</a></li></br>
                    <li class="nav-item"><a class="nav-link" href="#">Link</a></li></br>
                    <li class="nav-item"><a class="nav-link" href="#">Link</a></li></br>
                    <li class="nav-item"><a class="nav-link" href="#">Link</a></li></br>
                    <li class="nav-item"><a class="nav-link" href="#">Link</a></li></br>
                    <li class="nav-item"><a class="nav-link" href="#">Link</a></li></br>
                    <li class="nav-item"><a class="nav-link" href="#">Link</a></li></br>
                    <li class="nav-item"><a class="nav-link" href="#">Link</a></li></br>
                    <li class="nav-item"><a class="nav-link" href="#">Link</a></li></br>
                    <li class="nav-item"><a class="nav-link" href="#">Link</a></li></br>
                    <li class="nav-item"><a class="nav-link" href="#">Link</a></li></br>
                  </ul>
                </div>

<!--Little Div for chat names// notice the red borders for easier navigation-->
                <div "p-2 col-lg-5 col-md-6 col-sm-6 col-xs-6" style="margin: 15px 0 0 5px; width: 95%;">
                  <input type="text" style="width: 100%" placeholder="message">
                </div>
              </div>
              
              <div class="p-2 col-lg-4 col-md-6 col-sm-6 col-xs-6">
                <label style="margin-left:5px;">online</label>
                <div class="good-place-for-names" style="padding-left:3px;height:150px;overflow-y: scroll; border: solid 1px grey; background-color:rgb(199, 199, 199); border-radius:3px;">
                  <p>Susie Que</br>Beth Assing</br>Julie Foo</br>Big Ben</br>Super manSusie Que</br>Beth
                    Assing</br>Julie Foo</br>Big Ben
                    </br>Super manSusie Que</br>Beth Assing</br>Julie Foo</br>Big Ben</br>Super man</br>Julie
                    Foo</br>Big Ben</br>Super man</p>
                </div>
                <button class="btn btn-success btn-sm" style="margin: 15px 0 0 5px; width: 60%; align-self:center;" type="button">Send</button>
              </div>
            </div>
          </div>
        </div>
      </div>



      <!--Dashboard orders and cellar chart-->
      <div class="row">
        <!--Dashboard your cellar chart-->
        <div class="col-lg-5 col-md-12 col-sm-12 col-xs-12">
          <div class="card border-secondary" style="min-width: 18rem; max-width: 18rem;">
            <div class="card-header" style="height: 45px;">
              <h3>Your Cellar</h3>
            </div>
            <div class="card-body text-secondary">

              <h5 class="card-title" style="color:black; margin-left:6px;">29 Cases</h5>
              <div class="good-place-for-names"
                style="padding-left:3px;height:150px;overflow-y: scroll; border: solid 1px grey; background-color:rgb(199, 199, 199); border-radius:3px;">
                <p class="card-text">2 cases Merlot.</br>2 cases Bordeaux.</br>2 cases Bordeaux.</br>10 cases
                  Chardonay.</br>4 cases Haux Medoc.</br>10 cases Chardonay.</br>4 cases Haux Medoc.</br>7 cases Pinot
                  Grigio.</br>4 cases Sparkling.</br>4 cases Haux Medoc.</br>7 cases Pinot Grigio.</br>4 cases
                  Sparkling.</br></p>
              </div>
              <p style="float:left; margin-top:3px">...25 case orders</p>
                <button class="btn btn-success btn-sm" style="margin: 15px 0 0 5px; width: 30%; float:right;" type="button"><a href="/mycellar" style="color:white; !imprtant">Cellar</a></button>
            </div>
          </div>
        </div>



        <!--Dashboard orders Dashboard chart-->
        <div class="col-lg-5 col-md-12 col-sm-12 col-xs-12">
          <div class="card border-secondary" style="min-width: 18rem; max-width: 18rem;">
            <div class="card-header" style="height: 45px;">
              <h3>Orders</h3>
            </div>
            <div class="card-body text-secondary">

              <h5 class="card-title" style="color:black; margin-left:6px;">Orders Processing:</h5>
              <div class="good-place-for-names"
                style="padding-left:3px; height:150px;overflow-y: scroll; border: solid 1px grey; background-color:rgb(199, 199, 199); border-radius:3px;">
                <p class="card-text">2 cases Merlot.</br>2 cases Bordeaux.</br>2 cases Bordeaux.</br>10 cases
                  Chardonay.</br>4 cases Haux Medoc.</br>10 cases Chardonay.</br>4 cases Haux Medoc.</br>7 cases Pinot
                  Grigio.</br>4 cases Sparkling.</br>4 cases Haux Medoc.</br>7 cases Pinot Grigio.</br>4 cases
                  Sparkling.</br></p>
              </div>
             <p style="float:left; margin-top:3px">...2 shipping</p>
                <button class="btn btn-success btn-sm" style="margin: 15px 0 0 5px; width: 30%; float:right;" type="button"><a href="/orders" style="color:white; !imprtant">Orders</a></button>
            </div>
          </div>
        </div>


<div class="col-lg-2 col-md-2 hidden-sm hidden-xs"></div>

      </div>
      <!--end of small dashboard items-->

    </div><!-- end right column-->


  </div>
  <!--end large row container-->


</div>
<!--end backgorund div-->







</div>

{{!-- The profile modal --}}
<div class="modal fade" id="profileUpdateModal" tabindex="-1" role="dialog" aria-labelledby="profileUpdateModalTitle"
  aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="profileUpdateModalTitle">User Profile</h5>
      </div>
      <div class="modal-body" id="profileUpdateModalBody">

        <img id="profilePic" class="rounded-circle my-2 mx-auto" style="width: 100px; height: 100px"
          src="/images/default-profile.jpg">
        <br>

        {{!-- First Name --}}
        <label for="firstNameInput">First Name: </label>
        <input id="firstNameInput" name="firstNameInput" type="text" />
        <button id="firstNameUpdate" class="btn btn-primary btn-sm">Update</button>
        <br>

        {{!-- Last Name --}}
        <label for="lastNameInput">Last Name: </label>
        <input id="lastNameInput" name="lastNameInput" type="text" />
        <button id="lastNameUpdate" class="btn btn-primary btn-sm">Update</button>
        <br>

        {{!-- email address --}}
        <label for="emailInput">Email: </label>
        <input id="emailInput" name="emailInput" type="text" />
        <button id="emailUpdate" class="btn btn-primary btn-sm">Update</button>
        <br>

        {{!-- User Profile Picture link --}}
        <label for="profilePicUrl">Profile Picture Url: </label>
        <input id="profilePicInput" name="profilePicUrl" type="text" />
        <button id="profilePicUpdate" class="btn btn-primary btn-sm">Update</button>
        <br>

        {{!-- password update --}}

      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
      </div>
    </div>
  </div>
</div>
{{!-- End of the profile modal --}}


<script>
  function collapsClick() {
    var x = document.getElementById("myTopnav");
    if (x.className === "topnav") {
      x.className += " responsive";
    } else {
      x.className = "topnav";
    }
  }

  // ========== USER PROFILE UPDATE CODE =================
  $(document).ready(function () {
    const modalTitleEl = $("#profileUpdateModalTitle");
    const modalBodyEl = $("#profileUpdateModalBody");

    const firstNameInput = $("#firstNameInput");
    const firstNameUpdateBtn = $("#firstNameUpdate");

    const lastNameInput = $("#lastNameInput");
    const lastNameUpdateBtn = $("#lastNameUpdate");

    const emailInput = $("#emailInput");
    const emailUpdateBtn = $("#emailUpdate");

    const profilePicInput = $("#profilePicInput");
    const profilePicUpdateBtn = $("#profilePicUpdate");
    const profilePicImg = $("#profilePic");

    refresh();

    $(firstNameUpdateBtn).click(function () {
      const myUpdate = $(firstNameInput).val();
      if (myUpdate) {
        $.ajax({
          url: '/api/profile',
          type: 'post',
          data: {
            firstname: myUpdate,
          },
          success: function (data, textStatus, jQxhr) {
            refresh();
          },
          error: function (jqXhr, textStatus, errorThrown) {
            console.log(errorThrown);
          }
        });
      } else {
        alert("Please input a value to update");
      }
    });

    $(lastNameUpdateBtn).click(function () {
      const myUpdate = $(lastNameInput).val();
      if (myUpdate) {
        $.ajax({
          url: '/api/profile',
          type: 'post',
          data: {
            lastname: myUpdate,
          },
          success: function (data, textStatus, jQxhr) {
            refresh();
          },
          error: function (jqXhr, textStatus, errorThrown) {
            console.log(errorThrown);
          }
        });
      } else {
        alert("Please input a value to update");
      }
    });

    $(emailUpdateBtn).click(function () {
      const myUpdate = $(emailInput).val();
      if (myUpdate) {
        $.ajax({
          url: '/api/profile',
          type: 'post',
          data: {
            email: myUpdate,
          },
          success: function (data, textStatus, jQxhr) {
            refresh();
          },
          error: function (jqXhr, textStatus, errorThrown) {
            console.log(errorThrown);
          }
        });
      } else {
        alert("Please input a value to update");
      }
    });

    $(profilePicUpdateBtn).click(function () {
      const myUpdate = $(profilePicInput).val();
      if (myUpdate) {
        $.ajax({
          url: '/api/profile',
          type: 'post',
          data: {
            profileUrl: myUpdate,
          },
          success: function (data, textStatus, jQxhr) {
            refresh();
          },
          error: function (jqXhr, textStatus, errorThrown) {
            console.log(errorThrown);
          }
        });
      } else {
        alert("Please input a value to update");
      }
    });

  }); // closes the .ready(function() {

  let refresh = function () {
    $(firstNameInput).val("");
    $(lastNameInput).val("");
    $(emailInput).val("");
    $(profilePicInput).val("");

    $.ajax({
      url: "api/profile",
      type: "GET"
    }).then(function (result) {
      // console.log(result);
      $(firstNameInput).attr("placeholder", result.firstname);
      $(lastNameInput).attr("placeholder", result.lastname);
      $(emailInput).attr("placeholder", result.email);
      if (result.profileUrl) {
        $(profilePicInput).attr("placeholder", result.profileUrl);
        $("#profilePic").attr("src", result.profileUrl);
      } else {
        $(profilePicInput).attr("placeholder", "Add a picture url!");
        $("#profilePic").attr("src", "/images/default-profile.jpg");
      }
    });
  };


  // ========== END OF USER PROFILE UPDATE CODE =================
</script>